<!-- print screen template -->

<button class="btn btn-primary icon-arrows-cw" data-bind="click: print.loadCarts.bind(print)">Neu laden</button>
<input type="text" class="form-inline form-control-inline form-control" placeholder="Filter (regex)" data-bind='value: print.filter'>

<table class="table table-condensed">
  <thead>
    <tr>
      <td>Name</td>
      <td>Vorlesungen</td>
      <td>Erstellt</td>
      <td></td>
    </tr>
  </thead>
  <!-- getting this into the other tbody doesn't work due to the way the foreach binding works -->
  <tbody>
  <tr class="document-list" data-bind="
    click: $root.print.select.bind($root.print, $root.cart),
    visible: $root.cart.length > 0,
    css: { 'row-disabled': $root.print.selected && $root.print.selected !== $root.cart,
    'tr-selected': $root.print.selected && $root.print.selected === $root.cart
    }">
    <td><em>(Einkaufswagen)</em></td>
    <td data-bind="text: $root.cart.lectures()"></td>
    <td></td>
    <td></td>
  </tr>

  </tbody>
  <tbody data-bind="foreach: print.filteredCarts()">
  <tr class="document-list" data-bind="
    click: $root.print.select.bind($root.print, $data),
    css: { 'row-disabled': $root.print.selected && $root.print.selected !== $data,
    'tr-selected': $root.print.selected && $root.print.selected === $data
    }">
    <td data-bind="text: name"></td>
    <td data-bind="text: lectures()"></td>
    <td class="td-nowrap" data-bind="text: $data.displayDate()"></td>
    <td><button class="btn btn-compact btn-primary icon-folder-open" data-bind="click: $root.openCart.bind($root, $data)">Öffnen</button></td>
  </tr>
  </tbody>
</table>

<hr/>

<div class="text-center">
  <span class="fade-button" data-bind="visible: $root.print.carts.length >= $root.print.limit && $root.print.limit !== -1, click: print.showAllCarts.bind($root.print)">● ● ●</span>
</div>

<table class="pull-right">
  <tr>
    <td>Druckpreis:</td>
    <td data-bind="text: $root.print.printPrice()"></td>
  </tr>
  <tr>
    <td>
      <label for="deposit-count">Pfand: </label>
    </td>
    <td style="padding-left: 40px">
      +&nbsp;
      <input type="number" min='0' id="deposit-count" class='number-input form-control-inline form-control' data-bind="value: print.depositCount">
      &nbsp;×&nbsp;
      <span data-bind="text: (depositPrice / 100).toFixed(2)"></span>
    </td>
  </tr>
  <tr> <!-- sub-total -->
    <td></td>
    <td><hr></td>
  </tr>
  <tr>
    <td></td>
    <td data-bind="text: $root.print.totalPrice()"></td>
  </tr>

</table>
<div style="clear: both;">
  <input type="text" id="cover-text" class='number-input form-control-inline form-control' data-bind="value: $root.print.coverText" placeholder="Name für Pfand/Deckblatt" required>
  <button class='btn btn-primary icon-print' data-bind='click: print.submit.bind($root.print, $root.cart), enable: print.selected !== undefined'>Drucken</button>
  <div class="form-control-inline icon-placeholder">
    <div class="icon" data-bind="css: { 'spinner icon-spinner active': $root.print.status === 'waiting',
      'icon-ok text-success': $root.print.status === 'success',
      'icon-attention text-warning': $root.print.status === 'error',
      'fade-icon': $root.print.status === 'success' || $root.print.status === 'error' }"></div>
  </div>
</div>
